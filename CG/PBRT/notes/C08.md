# C08. Reflection Models

表面反射模型有许多来源

- 测量数据 Measured data：许多真实世界表面的反射分布特性已在实验室中进行了测量，通过表格形式或一组基函数的形式使用
- 现象学模型 Phenomenological models：定性地描述真实世界表面的模型可以很有效，而且往往易于使用，因为他们具有可以修改表面性质的直观的参数
- 仿真 Simulation：利用表面组成的低层次信息，模拟来自微观集合的光散射来生成反射数据。
- 物理光学（波） Physical (wave) optics：使用详细的光模型（将光视为波，计算 Maxwell 方程组的解），得到一些反射模型。计算昂贵，并不精确多少。
- 几何光学 Geometric optics：利用低级的散射和几何特性推导出封闭形式的反射模型。

**基本术语** 

表面反射可以分为四大类

- 漫反射 diffuse

  ![1556763784255](assets/1556763784255.png)

  漫反射面把光均匀地散射到各个方向。

  > 虽然完美的漫反射表面在物理上是不可实现的，但接近漫反射的表面包括暗淡的黑板和哑光涂料。

- 光滑镜面 glossy specular

  ![1556763809328](assets/1556763809328.png)

  有光泽的镜面表面，如塑料或高光漆，会优先在一组反射方向上散射光线——它们会显示出其它物体的模糊反射。

- 完美镜面 perfect specular

  ![1556763820477](assets/1556763820477.png)

  完美的镜面将入射光散射到一个单一的方向。

- 回射 retro-reflective

  ![1556763829974](assets/1556763829974.png)

  回射表面沿着入射方向散射光线

大多数真实表面是这四种类的混合

接着反射分布函数可以分类为各向同性 isotropic 和各向异性 anisotropic。

> 大多数物体是各向同性的。拉丝金属、多种衣物、光盘是各向异性的。

**几何设定** 

反射计算位于反射坐标系里，两个切向和法向分别是 x，y，z 轴。

可对应球面坐标$(\theta,\phi)$ 

![1556766289180](assets/1556766289180.png)

有
$$
\begin{aligned}
\cos \theta &= ( \mathbf { n } \cdot \omega ) = ( ( 0,0,1 ) \cdot \omega ) = \omega _ { z }\\
\cos \phi &= \frac{x}{\sin\theta}\\
\sin \phi &= \frac{y}{\sin\theta}\\
\end{aligned}
$$
一些重要的约定

- 在变换到表面的局部坐标系后，入射光方向 $\omega_i$ 和出射观察方向 $\omega_o$ 都是规范化和向外的。

- 法向永远指向物体的外部，使得容易判断光是进入还是离开物体。

- 着色用的局部坐标系不一定同于 `Shape::Intersect()` 返回的坐标系。

  > 不知道在说什么

- BRDF 和 BTDF 的实现不关注 $\omega_i$ 和 $\omega_o$ 是否位于同一半球。更高层代码保证只对反射和透射进行适当的计算。

## 8.1 基础接口 Basic Interface

## 8.2 镜面反射和透射 Specular Reflection and Transmission

## 8.3 朗伯反射 Lambertian Reflection

## 8.4 微表面模型 Microfacet Models

## 8.5 菲涅尔入射效应 Fresnel Incidence Effects

## 8.6 傅里叶基 BSDFs Fourier Basis BSDFs

